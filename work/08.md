## å‰ç«¯æ€§èƒ½ä¼˜åŒ–
### é—®é¢˜å½’å› 
##### é¦–å±æ€§èƒ½
1. é¦–æ¬¡æ‰“å¼€é¡µé¢å‘é€çš„è¯·æ±‚è¿‡å¤šï¼Œæ¯”å¦‚20å‡ ä¸ªï¼ˆ6ä¸ªå·¦å³æ¯”è¾ƒå¥½ï¼‰
2. åˆå§‹åŒ–é˜¶æ®µåŠ è½½äº†å¤§é‡æœªä½¿ç”¨çš„èµ„æº
3. åˆå§‹é˜¶æ®µä¸UCFè¿›è¡Œäº†é«˜é¢‘çš„æ•°æ®äº¤äº’ï¼ˆ10000æ¬¡å·¦å³ï¼‰   
##### å†…å­˜å ç”¨
1. åˆå§‹åŒ–é˜¶æ®µåŠ è½½å¤§é‡æœªä½¿ç”¨çš„å†…å®¹
2. å†…å­˜æ³„éœ²ï¼ˆå¤§äº100Mï¼‰
3. ç‰¹åˆ«çš„é¡µé¢å ç”¨çš„å†…å­˜å·¨å¤§ï¼Œå½±å“äº†æµè§ˆå™¨è‡ªèº«çš„é‡Šæ”¾èµ„æºåŠŸèƒ½
4. åœ¨å‰ç«¯è¿›è¡Œå¤§æ•°æ®çš„èŠ‚ç‚¹å¤„ç†å’Œå±•ç¤º

### æŒ‡æ ‡ï¼š
+ æµè§ˆå™¨æ¶ˆè€—æ—¶é—´ï¼š
  1. ç™½å±æ—¶é—´
  2. é¡µé¢æ¨¡å—æ¸²æŸ“æ—¶é—´
  3. diffç®—æ³•å¯¹æ¯”

+ ä¸šåŠ¡é€»è¾‘æ—¶é—´
  1. å‰ç«¯ç®—æ³•
  2. æ•°æ®æ ¼å¼å¤„ç†
  3. æ¡ä»¶åˆ¤æ–­
+ æ¥å£è¯·æ±‚æ—¶é—´
  1. å‘æœåŠ¡ç«¯è¯·æ±‚
  2. å‘å®¢æˆ·ç«¯è¯·æ±‚

### æ’æŸ¥å·¥å…·
Chrome Devtools 
+ æ€§èƒ½
+ å†…å­˜ï¼ˆå¿«ç…§å¯¹æ¯”ï¼‰
+ ç½‘ç»œ
+ performance
+ Performance monitor

### å¸¸è§çš„éœ€è¦æ€§èƒ½ä¼˜åŒ–çš„ç‚¹
#### 1. å¤§æ•°æ®é‡è¡¨æ ¼
   ä½¿ç”¨tableå¤§æ•°æ®è¡¨æ ¼æ—¶ï¼Œé¡µé¢çš„æ€§èƒ½ä¼šéšç€åˆ—æ•°çš„å¢åŠ è€Œæ¶åŒ–ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œé™ä½ç”¨æˆ·å¯è§†èŒƒå›´å†…çš„DOMæ¸²æŸ“æ•°é‡ï¼Œå°†å¤§æ•°æ®é‡ç»„ä»¶æ”¹æˆ simple-table ç»„ä»¶ã€‚
#### 2. å†…å­˜æ³„æ¼
   æ¯”å¦‚ç»‘å®šçš„äº‹ä»¶å¿˜è®°è§£ç»‘ï¼Œå®šæ—¶ä»»åŠ¡å¿˜è®°æ¸…é™¤
#### 3. å¤šè¡¨å•åœºæ™¯ä¸‹çš„é¦–å±åŠ è½½é—®é¢˜
   è¡¨å•ç»„ä»¶ä½¿ç”¨çš„ä¸¤ä¸ªæœ€å°åŸåˆ™ï¼š
   ï¼ˆ1ï¼‰ç»„ä»¶åŠ è½½æœ€å°åŸåˆ™ï¼Œå³å½“å‰é¡µé¢åªåŠ è½½ç”¨æˆ·èƒ½çœ‹
åˆ°çš„ç»„ä»¶ã€‚
   ï¼ˆ2ï¼‰æ•°æ®è¯·æ±‚æœ€å°åŸåˆ™ï¼Œæ‰€æœ‰ç»„ä»¶åªå‘èµ·åˆå§‹åŒ–éœ€è¦
çš„æ•°æ®è¯·æ±‚ã€‚
   è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œè¿›è¡Œç»„ä»¶å ä½ä¿®æ”¹ï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»æ—¶åœ¨è¿›è¡Œç»„ä»¶çš„æ›¿æ¢ã€‚æ¯”å¦‚è¾“å…¥æ¡†ä½¿ç”¨inputæ¨¡æ‹Ÿï¼Œç”¨æˆ·ç‚¹å‡»æ—¶å†æ›¿æ¢ä¸ºçœŸçš„è¾“å…¥æ¡†ç»„ä»¶ã€‚
#### 4. é‡å¤è¯·æ±‚
   æŒ‡è¯·æ±‚åœ°å€ã€å…¥å‚ã€è¿”å›å€¼ç›¸åŒçš„è¯·æ±‚   
   å¸¸ç”¨çš„å‡ ç§è§£å†³æ–¹æ¡ˆï¼š
   + é‡‡ç”¨å‰ç«¯ç¼“å­˜æŠ€æœ¯ï¼Œå­˜åœ¨ localstroage é‡Œé¢ï¼Œé€‚
åˆæ•°æ®ä¸å¤§çš„æƒ…å†µã€‚
   + é‡‡ç”¨çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚ï¼ŒRedux æˆ–è€… moboxï¼Œ
Pinia ç­‰ã€‚
   + è¯·æ±‚å‰ç§»ï¼Œé€šè¿‡ props è¿›è¡Œæ•°æ®ä¼ é€’ã€‚
   + åˆ©ç”¨å…¨å±€å˜é‡æ¥å­˜æ•°æ®ã€‚
#### 5. keep-aliveå¸¦æ¥çš„å†…å­˜é—®é¢˜
è§£å†³ï¼šä¸éœ€è¦ç¼“å­˜çš„è·¯ç”±ï¼Œç§»å‡ºkeep-alive   
æ–¹æ³•ğŸ‘Œï¼š
1. åœ¨è·¯ç”±é…ç½®ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå­—æ®µç”¨äºæ§åˆ¶æ˜¯å¦éœ€è¦ç¼“å­˜
    ```
    {
      path: '/componentA',
      name: 'componentA',
      component: () => import('@/views/componentA/index.vue'),
      meta: {
       keepAlive: true 
      }
   },
   {
      path: '/componentB',
      name: 'componentB',
      component:() => import('@/views/componentA/index.vue'),
      meta: {
        keepAlive: false
      }
   },
    ```
2. APP.vueä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä»…å°†éœ€è¦ç¼“å­˜çš„æ”¾åˆ° keep-alive ä¸­ 
   ```
   <template>
     <div id="app">
       <keep-alive v-if="$route.meta.keepAlive">
         <router-view class="page"></router-view>
       </keep-alive>
       <router-view class="page" v-else></router-view>
     </div>
   </template>
   ```
#### 6. v-ifå¸¦æ¥çš„å†…å­˜æ³„æ¼
å¯ä»¥è®©v-ifä¸ºfalseæ—¶  å°†ç›¸å…³çš„æ•°æ® æ‰‹åŠ¨æ¸…é™¤
#### 7.å…¶ä»–çš„ä¸€äº›æ—¥å¸¸æªæ–½  
1. å›¾ç‰‡çš„æ‡’åŠ è½½----->å‡å°‘é¦–æ¬¡åŠ è½½çš„httpè¯·æ±‚æ¬¡æ•°
2. å°½é‡åˆå¹¶ã€å‹ç¼©CSSã€jsæ–‡ä»¶ï¼ˆæ‰“åŒ…ï¼šwebpackã€gulpï¼‰----->å‡å°‘httpè¯·æ±‚æ¬¡æ•°å’Œè¯·æ±‚èµ„æºçš„å¤§å°
3. ä½¿ç”¨SVGã€å­—ä½“å›¾æ ‡ä»£æ›¿pngï¼›ä½¿ç”¨ç²¾çµå›¾
4. å‡å°‘cookieçš„ä½¿ç”¨----->å‡å°‘å®¢æˆ·ç«¯çš„å­˜å‚¨é‡
5. å‰åç«¯æ•°æ®äº¤äº’å°½é‡ä½¿ç”¨jsonåˆé€‚----->èµ„æºå°ï¼Œæ•°æ®å¤„ç†æ–¹ä¾¿
6. å‡å°‘domæ“ä½œ
7. å¯¼å…¥csså°‘ç”¨@importï¼Œå°½é‡ç”¨link----->@importåŒæ­¥ï¼Œlinkå¼‚æ­¥
8. é¿å…ä½¿ç”¨iframe----->iframeä¸ä»…ä¸å¥½ç®¡æ§æ ·å¼ï¼Œè€Œä¸”ç›¸å½“äºåœ¨æœ¬é¡µé¢åˆåµŒå¥—å…¶ä»–é¡µé¢ï¼Œæ¶ˆè€—æ€§èƒ½ä¼šæ›´å¤§


#### å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½  
:pencil: **é€šè¿‡ç›‘å¬æ»šåŠ¨å®ç°ï¼š**
```
<template>
  <div class="home-pic">
    <img src="../assets/haha.jpg" data-url="../assets/haha.jpg" />
    <img src="../assets/haha1.jpg" data-url="../assets/haha1.jpg" />
    <img src="../assets/haha copy 2.jpg" data-url="../assets/haha copy 2.jpg" />
    <img src="../assets/haha copy 3.jpg" data-url="../assets/haha copy 3.jpg" />
    <img src="../assets/haha copy 4.jpg" data-url="../assets/haha copy 4.jpg" />
    <img src="../assets/haha copy 5.jpg" data-url="../assets/haha copy 5.jpg" />
    <img src="../assets/haha copy 6.jpg" data-url="../assets/haha copy 6.jpg" />
    <img src="../assets/haha copy 7.jpg" data-url="../assets/haha copy 7.jpg" />
  </div>
</template>

<script>
export default {
  name: "lazyLoad",
  mounted() { 
    window.addEventListener("scroll", this.debounce(this.lazyLoad, 400), true);
  },
  methods: {
    debounce(fn, delay) {
      let timer = null; //å› ä¸ºé—­åŒ… æ‰€ä»¥å˜é‡ä¸ä¼šè¢«é”€æ¯
      return function() {
        if (timer) {
          clearTimeout(timer);
        }
        timer = setTimeout(fn, delay); //ç®€çº¦å†™æ³•ï¼šç›´æ¥ä¼ å…¥å‡½æ•°åï¼ŒthisæŒ‡å‘çš„ å°±æ˜¯fnçš„åœ°å€
      };
    },
    lazyLoad() {
      let dataUrls = document.querySelectorAll("img[data-url]"); // è·å–å±æ€§åä¸­æœ‰data-urlçš„

      Array.prototype.forEach.call(dataUrls, function(item, index) {
        let rect;
        if (item.dataset.src === "") {
          return;
        }

        // è·å¾—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„å·¦ï¼Œä¸Šï¼Œå³å’Œä¸‹åˆ†åˆ«ç›¸å¯¹æµè§ˆå™¨è§†çª—ï¼ˆå¯è§†åŒºåŸŸï¼‰çš„ä½ç½®
        rect = item.getBoundingClientRect();

        // è§†å£çš„é«˜åº¦
        const viewHeight = document.documentElement.clientHeight;

        //å›¾ç‰‡ä¸€è¿›å…¥å¯è§†åŒºï¼ŒåŠ¨æ€åŠ è½½
        if (rect.bottom >= 0 && rect.top < viewHeight) {
          (function() {
            let img = new Image();
            img.src = item.dataset.url;
            img.onload = function() {
              item.src = img.src;
            };
            item.removeAttribute("data-url");
          })();
        }
      });
    },
  },
};
</script>

<style>
.home-pic {
  margin-left: 25%;
}
img {
  display: block;
  width: 300px;
  margin: 10px;
}
</style>

```

> ä¸Šé¢å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œç”¨åˆ°äº†è‡ªå®šä¹‰å±æ€§. å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
> 1.```data-XXX```æ ¼å¼å®šä¹‰è‡ªå®šä¹‰å±æ€§ï¼Œå¦‚  data-url : 
> ```<img src="../assets/haha.jpg" data-url="../assets/haha.jpg" />```  
> 2.å–è¯¥å±æ€§ä½¿ç”¨  ```dataset.XXX```   å¦‚ï¼š
> ```mg.src = item.dataset.url;```

:pencil: **é€šè¿‡ v-lazy å®ç°ï¼š**
1. å®‰è£…æ’ä»¶ 
   ```js
   npm install vue-lazyload
   ```
2. main.jsä¸­å¼•å…¥å¹¶ä½¿ç”¨
   ```js
   import VueLazyload from 'vue-lazyload'
   Vue.use(VueLazyload) 
   ```
3. ä½¿ç”¨æ‡’åŠ è½½
   ```js
   //ç›´æ¥å°† ':src' æ›¿æ¢ä¸º 'v-lazy' å³å¯
   <img v-lazy="img.src" >
   <img :src="img.src" >
   ```